{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "git-set-skip",
            "type": "shell",
            "command": "git",
            "args": [
                "update-index", "--skip-worktree", "*.code-workspace"
            ],
            "runOptions": {
                "runOn": "folderOpen"
            }
        },
        {
            "label": "task-mkdir",
            "type": "shell",
            "command": "mkdir",
            "args": [
                "build"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": []
        },
        // windows generate
        {
            "label": "task[win]: generate-with-deps",
            "type": "shell",
            "command": "cmake",
            "args": [
                "..",
                "-DBUILD_SHARED_LIBS=1",
                "-DDEPS_BUILD=1"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build",
            },
            "problemMatcher": [],
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            },
        },
        {
            "label": "task[win]: generate-with-deps-x64",
            "type": "shell",
            "command": "cmake",
            "args": [
                "..",
                "-DBUILD_SHARED_LIBS=1",
                "-DDEPS_BUILD=1",
                "-A",
                "x64"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": [],
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            }
        },
        {
            "label": "task[win]: generate-wo-deps",
            "type": "shell",
            "command": "cmake",
            "args": [
                "..",
                "-DBUILD_SHARED_LIBS=1",
                "-DDEPS_BUILD=0"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": [],
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            }
        },
        {
            "label": "task[win]: generate-wo-deps-x64",
            "type": "shell",
            "command": "cmake",
            "args": [
                "..",
                "-DBUILD_SHARED_LIBS=1",
                "-DDEPS_BUILD=0",
                "-A",
                "x64"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": [],
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            },
        },
        {
            "label": "task[win]: generate-with-deps-static-crt",
            "type": "shell",
            "command": "cmake",
            "args": [
                "..",
                "-DBUILD_SHARED_LIBS=1",
                "-DDEPS_BUILD=1",
                "-DCRT_STATIC=1"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": []
        },
        {
            "label": "task[win]: generate-with-deps-static-deps",
            "type": "shell",
            "command": "cmake",
            "args": [
                "..",
                "-DDEPS_BUILD=1",
                "-DDEPS_STATIC=1",
                "-DCRT_STATIC=0"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": []
        },
        {
            "label": "task[win]: generate-with-deps-static-all",
            "type": "shell",
            "command": "cmake",
            "args": [
                "..",
                "-DDEPS_BUILD=1",
                "-DDEPS_STATIC=1",
                "-DCRT_STATIC=1"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": []
        },
        // windows build
        {
            "label": "task[win]: build-deps-debug",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                ".",
                "--target",
                "deps",
                "--config",
                "Debug"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": [],
            "group": "build",
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            },
        },
        {
            "label": "task[win]: build-deps-release",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                ".",
                "--target",
                "deps",
                "--config",
                "Release"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": [],
            "group": "build",
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            }
        },
        {
            "label": "task[win]: build-main-debug",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                ".",
                "--config",
                "Debug"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": [],
            "group": "build",
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            }
        },
        {
            "label": "task[win]: build-main-release",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                ".",
                "--config",
                "Release"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": [],
            "group": "build",
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            }
        },
        // linux generate
        {
            "label": "task[lnx]: generate-with-deps-debug",
            "type": "shell",
            "command": "cmake",
            "args": [
                "..",
                "-DCMAKE_BUILD_TYPE=Debug",
                "-DBUILD_SHARED_LIBS=1"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": [],
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            }
        },
        {
            "label": "task[lnx]: generate-release",
            "type": "shell",
            "command": "cmake",
            "args": [
                "..",
                "-DCMAKE_BUILD_TYPE=Release",
                "-DBUILD_SHARED_LIBS=1"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": [],
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            }
        },
        {
            "label": "task[lnx]: generate-wo-deps-debug",
            "type": "shell",
            "command": "cmake",
            "args": [
                "..",
                "-DCMAKE_BUILD_TYPE=Debug",
                "-DBUILD_SHARED_LIBS=1",
                "-DDEPS_BUILD=0"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": [],
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            }
        },
        // linux build
        {
            "label": "task[lnx]: build-deps",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                ".",
                "--target",
                "deps"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": [],
            "group": "build",
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            }
        },
        {
            "label": "task[lnx]: build-main",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "."
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": [],
            "group": "build",
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            }
        },
        // windows compound
        {
            "label": "task[win]: <compound> debug",
            "type": "shell",
            "dependsOrder": "sequence",
            "dependsOn": [
                "task[win]: generate-with-deps",
                "task[win]: build-deps-debug",
                "task[win]: generate-wo-deps",
                "task[win]: build-main-debug"
            ],
            "problemMatcher": [],
            "group": "build",
        },
        {
            "label": "task[win]: <compound> release",
            "type": "shell",
            "dependsOrder": "sequence",
            "dependsOn": [
                "task[win]: generate-with-deps",
                "task[win]: build-deps-release",
                "task[win]: generate-wo-deps",
                "task[win]: build-main-release"
            ],
            "problemMatcher": [],
            "group": "build",
        },
        {
            "label": "task[win]: <compound> debug-x64",
            "type": "shell",
            "dependsOrder": "sequence",
            "dependsOn": [
                "task[win]: generate-with-deps-x64",
                "task[win]: build-deps-debug",
                "task[win]: generate-wo-deps-x64",
                "task[win]: build-main-debug"
            ],
            "problemMatcher": [],
            "group": "build",
        },
        //linux compound
        {
            "label": "task[lnx]: <compound> debug",
            "type": "shell",
            "dependsOrder": "sequence",
            "dependsOn": [
                "task[lnx]: generate-with-deps-debug",
                "task[lnx]: build-deps",
                "task[lnx]: generate-wo-deps-debug",
                "task[lnx]: build-main",
            ],
            "problemMatcher": [],
            "group": "build",
        },
        // input
        {
            "label": "task[win]: build-deps-select",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                ".",
                "--target",
                "deps",
                "--config",
                "${input:input-config}"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build"
            },
            "problemMatcher": [],
            "group": "build",
            "presentation": {
                "focus": true,
                "panel": "dedicated",
                "clear": true
            }
        },
        {
            "label": "test",
            "type": "shell",
            "command": "echo ${input:inp-test}"
        }
    ],
    "inputs": [
        {
            "id": "input-config",
            "type": "pickString",
            "options": [
                "Debug", "Release"
            ],
            "description": "select build type"
        },
        {
            "id": "inp-test",
            "command": "git.fetchAll",
            "args": "",
            "type": "command"
        }
    ],
    
}